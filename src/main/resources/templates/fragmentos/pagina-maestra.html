<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security"
      th:fragment="html(titulo, contenido, estilos)">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Título dinámico -->
    <title th:replace="${titulo}">Aplicación</title>

    <!-- CSS global -->
    <link rel="stylesheet" th:href="@{/css/navbar.css}" />

    <!-- CSS extra opcional -->
    <th:block th:replace="${estilos} ?: ~{}"></th:block>
</head>

<body>
    <div class="contenedor">

        <!-- Cabecera -->
        <header class="cabezal-principal">
            <h1>BiosWork</h1>
        </header>

        <!-- Usuario logueado -->
        <p>
            BIENVENID@ 
            <span sec:authentication="name"></span>
        </p>

        <!-- Navegación -->
        <nav class="navegacion-principal">
            <ul>
                <li><a th:href="@{/home/main}">Inicio</a></li>

                <!-- === CONSULTOR === -->
                <li sec:authorize="hasAuthority('consultor')">
                    <a th:href="@{/consultores/lista}">Consultores</a>
                    <a th:href="@{/clientes/lista}">Clientes</a>
                    <a th:href="@{/consultores/ver}">Mi perfil</a>
                    <a th:href="@{/areas/lista}">Áreas</a>
                </li>

                <!-- === CLIENTE === -->
                <li sec:authorize="hasAuthority('cliente')">
                    <a th:href="@{/postulantes/lista}">Ver postulantes</a>
                    <a th:href="@{/ofertas/listaPorCliente}">Mis ofertas</a>
                </li>

                <!-- === POSTULANTE === -->
                <li sec:authorize="hasAuthority('postulante')">
                    <a th:href="@{/postulantes/ver}">Mi perfil</a>
                    <a th:href="@{/ofertas/lista}">Ver ofertas</a>
                    <a th:href="@{/postulaciones/lista}">Mis postulaciones</a>
                </li>

                <!-- === TODOS LOS USUARIOS AUTENTICADOS === -->
                <li sec:authorize="isAuthenticated()">
                    <a th:href="@{/home/deslogueo}">Salir</a>
                </li>

                <!-- === USUARIOS ANÓNIMOS === -->
                <li sec:authorize="isAnonymous()">
                    <a th:href="@{/home/login}">Iniciar sesión</a>
                </li>
            </ul>
        </nav>

        <!-- Contenido dinámico -->
        <main class="contenido" th:replace="${contenido} ?: ~{}"></main>

    </div>
</body>
</html>